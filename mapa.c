#ifndef mapadetipos_h
#define mapadetipos_h

#include <vector>
#include <map>
#include <string>
#include <iostream>

using namespace std;

class MapaDeTipos{
public:
	vector< map<string, int> > listMapas;
	int nivel;
	int currsize;
	MapaDeTipos(){
		nivel = 1;
		currsize = 16; // Tama;o inicial
		listMapas.resize(currsize);
	}

	~MapaDeTipos(){
		for (int i = 0; i < listMapas.size(); i++){
			listMapas[i].clear();
		}
		listMapas.clear();
	}

	void nuevoNivel(){
		nivel++;
		if (nivel == currsize){
			currsize = 2*currsize;
			listMapas.resize(currsize);
		}
	}

	bool subirNivel(){
		if (nivel == 1){
			return false;
		}
		else{
			listMapas[nivel - 1].clear();
			nivel--;
			return true;
		}
	}

	bool estaDeclarado(string s){
		if (listMapas[nivel - 1].find(s) != listMapas[nivel - 1].end()){
			return true; 
		}
		return false;
	}

	bool existe(string s){
		for (int i = nivel-1; i >= 0; i--){
			if (listMapas[i].find(s) != listMapas[i].end()){
				return true; 
			}
		}
		return false;
	}

	int obtenerTipo(string s){
		for (int i = nivel - 1; i >= 0;i--){
			if (listMapas[i].find(s) != listMapas[i].end()){
				return listMapas[i][s];
			}
		}
		return -1;
	}


	void agregar(string s,int i){
		listMapas[nivel-1][s] = i;
	}

};








/*
soy el mapa.cpp

					  @@                                    
					 @@@@                                   
					@@`#@                                   
				   @#```#@        @                         
				  @#`````@@    @@@@@                        
				 @#``````#@@ @@@#``#@@                      
				@#````````#@@@#``````#@                     
			   @#``````````@#`````````#@                    
			  @@``````````#````````````@@                   
			 @@#````````##``````````##``@                   
			 @#````````#````````````@@@##@  @@@             
			@@````````#````````````##,,,#@@@@@@@            
			@#``````##`````````````##,,,,,@#```#@           
		   @@``````##``````````````##,,,,,,##```@           
		   @#`````##`````````````####,,,,,,,,#``#@          
		   @`````#`````````````##``##,,,##@@@@#``@          
		   @````#``````#@#```##````###@@##```````#@         
		  @@```##``````@,##`#```````#`````````````@         
		   @```#``````##,,@#``````````````````````@         
		   @#`#```````@,,,,@``````````````````````#@        
			@@```````##,,,,##``````````````````````@        
		   @@````````@,,,,,,@``````````````````````@        
		   @#```````##,,,,,,@``````````````````````#@       
		  @@```````#@,,,,,#@````````````````````````@       
		  @#``````#`#,,,,##`````````````````````````@@      
		   @#````#`##,,,##``````````````````````````#@      
			@```#``#,,,@#```````````````````````````#@      
			@@`#```@,,@``````````````````````````````@      
			 @#````@#@```````````````````````````````@@     
			@@`````@@````````````````````````````````#@     
		   @@``````@````````````````````#@@@#````````#@     
		   @#``````````````````````````#     #````````@     
		  @@```````````````````````````@      #```````@     
		  @@``````````````````````````#        ```````#     
		   @#``````````````````#@@@@``@        #``````#@    
			@#````````````````@     @#         @```````@    
		   @@#```````````````#       @   @@@    ```````@    
		  @#``#``````````````@        @ @@  @   #``````@    
		@@#````#`````````````          @@@@@@   #``````@    
		@#`````##```````````#  @@@     @@@@@@   #``````#@   
	   @#```````#```````````# @@@ @    @ @@@    #``````#@   
	  #``````````#``````````` @@@@@             #``````#@   
	 @````````````#`````````` @@@@@             ```````#@   
	@#````````````#``````````@ @@@@            #````````@   
   @#``````````````#`````````#                @`````````@   
   #```````````````#``````````@         @    @#`````````@   
  @`````````````````#`````````#@@      @##@@@```````````@   
 @``````````````````#```````#@#``##@   #````````````````@   
 #```````````````````#``````````````# @`````````````````@   
 #```````````````````#```````````````##`````````````````@   
@`````````````````````#```````````````#`````````````````@@  
@`````````````````````#`````````````````````````````````@@  
 @`````````````````````#````````````````````````````````@@  
  @#```````````````````#````````````````````````````````@@  
	@```````````````````#```````````````````````````````@@  
	 @#`````````````````@``````#````````````````````````@@  
	  @@````````````````#```````###`````````````##``````@@  
	   @@#```````````````#```````;#@##```````###````````@@  
		@@#``````````````#```````#;;;;###@###;#`````````@@  
		  @@`````````````#```````#;;;;;;;;;;;;#`````````@   
		   @@#````````````#``````#;;;;;;;;;;;;``````````@   
			@@#```````````+``````#;;;;;;;;;;;;``````````@   
			  @#``````````#```````#;;;;;;;;;;;``````````@   
			   @#`````````````````#;;;;;;;;;;#``````````@   
				@``````````#``````#;;;;;;;;;;;``````````@   
				 @`````````#```````#;;;;;;;;;;``````````@   
				 @#````````#```````#;;;;;;;;;;#`````````@   
				  @````````#````````#;;;;;;;;;#````````#@   
				  @#`````````````````#;;;;;;;;#````````#@   
				  @@``````````````````#;;;;;;;#````````#@   
				   @````````#`````````##;;;;;;#````````@@   
				   @#```````#``````````##;;;;;;````````@@   
				   @@```````#````````````@###;###``````@@   
					@```````#``````````````#####```````@    
					@#``````#``````````````````````````@    
					@#``````#``````````````````#``````#@    
					@@``````#````````````````##```````#@    
					 @``````````````````````#`````````@     
					 @````````````````````````````````@     
					 @````````````````````````````````@     
					 @```````#```````````````````````#@     
					 @#``````#```````````````````````#@     
					 @#``````````````````````````````@      
					 @#``````````````````````````````@      
					 @#`````````````````````````````#@      
					 @#`````#```````````````````````#@      
					 @#`````#```````````````````````@       
					 @#`````#```````````````````````@       
					 @#`````#``````````````````````#@       
					 @#`````@``````````````````````@@       
					 @``````#``````````````````````@        
					 @``````#`````````````````````#@        
					 @````````````````````````````@@        
					 @````````````````````````````@         
					 @`````#`````````````````````#@         
					 @`````#`````````````````````@          
					 @@#```#`````````````````````@          
					  @@@#`#````````````````````#@          
						@@@`````````````````````@           
						 @@````````````````````#@           
						 @@````````````````````@            
						  @#`````````````````#@@            
						   @@#``````````````#@@             
							 @@@##```````##@@               
							   @@@@@@@@@@@                  
															
															
															
*/

#endif